---
// @ts-ignore
import { Icon } from "astro-icon/components";

interface BenefitItem {
  icon: string;
  title: string;
  description: string;
  accentColor?: string;
}

interface Props {
  benefits: BenefitItem[];
  title?: string;
  description?: string;
  columns?: 2 | 3 | 4;
  class?: string;
}

const {
  benefits,
  title = "Key Benefits",
  description = "Discover the advantages that set us apart.",
  columns = 3,
  class: className,
} = Astro.props;

// Responsive grid classes based on column count
const gridCols = {
  2: "grid-cols-1 md:grid-cols-2",
  3: "grid-cols-1 md:grid-cols-2 lg:grid-cols-3", 
  4: "grid-cols-1 md:grid-cols-2 lg:grid-cols-4",
};
---

<section class:list={["benefits-grid", className]}>
  <!-- Section Header -->
  {(title || description) && (
    <div class="text-center mb-12 md:mb-16">
      {title && (
        <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold lg:tracking-tight theme-headline mb-4">
          {title}
        </h2>
      )}
      {description && (
        <p class="text-lg md:text-xl theme-paragraph max-w-3xl mx-auto">
          {description}
        </p>
      )}
    </div>
  )}

  <!-- Benefits Grid -->
  <div class:list={["grid", gridCols[columns], "gap-8 md:gap-12 lg:gap-16"]}>
    {benefits.map((benefit) => (
      <div class="benefit-item flex flex-col items-start gap-4 p-6 rounded-xl theme-card-bg border-2 transition-all duration-300 hover:shadow-lg hover:scale-[1.02]" style="border-color: var(--color-theme-stroke);">
        <!-- Icon Container -->
        <div 
          class="flex items-center justify-center w-12 h-12 md:w-14 md:h-14 rounded-full p-3 shrink-0 transition-all duration-300"
          style={benefit.accentColor 
            ? `background-color: ${benefit.accentColor};` 
            : "background-color: var(--color-theme-button);"
          }
        >
          <Icon 
            name={benefit.icon} 
            class="w-6 h-6 md:w-7 md:h-7 text-white" 
          />
        </div>

        <!-- Content -->
        <div class="flex-1">
          <h3 class="text-lg md:text-xl font-semibold theme-headline mb-3 leading-tight">
            {benefit.title}
          </h3>
          <p class="theme-paragraph leading-relaxed">
            {benefit.description}
          </p>
        </div>
      </div>
    ))}
  </div>
</section>

<style>
  .benefits-grid {
    scroll-margin-top: 2rem;
  }

  .benefit-item:hover div:first-child {
    transform: scale(1.05);
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    .benefit-item {
      padding: 1.25rem;
    }
  }

  /* Focus styles for accessibility */
  .benefit-item:focus-within {
    outline: 2px solid var(--color-theme-button);
    outline-offset: 2px;
  }
</style>